<!DOCTYPE html>
<html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<body>

<canvas id="myChart" style="width:100%;max-width:1000px"></canvas>

<script>
var xValues = ["Very satisfied", "Satisfied", "Dissatisfied", "No opinion"];
var yValues = [49.3, 32, 18, 0.7];
var barColors = ["green", "orange","red","bleu"];

new Chart("myChart", {
  type: "horizontalBar",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
   
   animation: {
    duration: 0,
    onComplete: function () {
        var ctx = this.chart.ctx;
        ctx.font = Chart.helpers.fontString(14, 'normal', Chart.defaults.global.defaultFontFamily);
        ctx.fillStyle = '#000000'
        ctx.textAlign = 'center';
        ctx.textBaseline = 'bottom';
        this.data.datasets.forEach(function (dataset) {
            for (var i = 0; i < dataset.data.length; i++) {
                var model = dataset._meta[Object.keys(dataset._meta)[0]].data[i]._model;
                if(dataset.data[i] == 49.3){ 
                  ctx.fillText(dataset.data[i]+"%", model.x-50, model.y +9)}
                else if(dataset.data[i] == 0.7){ 
                  ctx.fillText(dataset.data[i]+"%", model.x+20, model.y +9)}  
      
                else {ctx.fillText(dataset.data[i]+"%", model.x-16, model.y +9)};
            }
        });
    }
},

    
  scales:{
     x: {
       
        grid:{
              offset: true}
       
     },
    yValues: {
        beginAtZero: true,
      }
    },
    legend: {display: false},
    title: {
      display: true,
      text: "What do you think about Lausanne' s transports punctuality ?"
    }

    
  }
});

</script>
